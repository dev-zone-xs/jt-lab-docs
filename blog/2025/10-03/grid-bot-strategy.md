---
slug: grid-bot-strategy
title: Грид-бот: Автоматическая стратегия усреднения позиций
authors: [jt-lab-team]
tags: [grid-bot, trading-strategy, crypto-bots, automation, jt-trader, grid-trading, dca]
draft: false
date: 2025-10-03
---

# Грид-бот: Автоматическая стратегия усреднения позиций

[GitHub](https://github.com/jt-lab) | [Документация](https://docs.jt-lab.com) | [JT-Lib](https://github.com/jt-lab/jt-lib)

## Что такое грид-бот?

**Грид-бот** - это автоматизированная торговая стратегия, которая использует принцип усреднения позиций (DCA - Dollar Cost Averaging) для получения прибыли от волатильности рынка. В отличие от традиционных стратегий, которые пытаются предсказать направление движения цены, грид-бот работает по принципу "чем ниже цена, тем больше покупаем" - он автоматически размещает ордера на покупку на определенном расстоянии ниже текущей цены, создавая сетку (grid) ордеров.

Когда цена падает и срабатывает один из ордеров на покупку, бот увеличивает позицию по более выгодной цене. При росте цены бот фиксирует прибыль, продавая часть позиции, и готовится к следующему циклу. Такой подход позволяет получать стабильную прибыль в боковом тренде и минимизировать убытки при падении рынка, поскольку каждая новая покупка происходит по более низкой цене, чем предыдущая.

Грид-бот особенно эффективен на волатильных рынках с частыми отскоками, где цена постоянно колеблется в определенном диапазоне. Стратегия не требует постоянного мониторинга и принятия решений - бот работает полностью автоматически, следуя заранее заданным правилам размещения и закрытия ордеров.

## Архитектура JT Grid Bot

**JT Grid Bot** - это реализация грид-стратегии на платформе JT-Trader, которая использует модульную архитектуру для управления множественными торговыми парами одновременно. Робот построен на основе двух основных компонентов:

### Основной класс JtGridBot

Главный класс `JtGridBot` наследуется от `BaseScript` и отвечает за:

- **Управление множественными корзинами** - создает отдельную корзину (`DynamicGridBasket`) для каждой торговой пары
- **Автоматический выбор активов** - поддерживает фильтрацию по объему торгов (минимум $500,000) и плечу (минимум 20x)
- **Гибкая настройка параметров** - различные настройки для режимов тестирования и реальной торговли

### Ключевые параметры стратегии

```typescript
static definedArgs = [
  {
    key: 'symbols',
    mode: 'runtime',
    defaultValue: 'ADA/USDT:USDT,XRP/USDT:USDT,TRX/USDT:USDT,BNB/USDT:USDT,DOGE/USDT:USDT,AVAX/USDT:USDT,LINK/USDT:USDT',
    filters: {
      volume: { min: 500000 },    // Минимальный объем торгов
      leverage: { min: 20 },      // Минимальное плечо
      maxSymbols: 10,             // Максимум символов
      autoSelect: 10,             // Автовыбор активов
    },
  },
  {
    key: 'gridStepPercent',       // Шаг сетки в процентах
    defaultValue: 10,
  },
  {
    key: 'tpPercent',            // Процент тейк-профита
    defaultValue: 1,
  },
  {
    key: 'sizeFactor',           // Множитель размера позиции
    defaultValue: 1,
  },
];
```

### Система корзин (DynamicGridBasket)

Каждая торговая пара управляется через отдельную корзину `DynamicGridBasket`, которая реализует:

- **Динамическое создание ордеров** - автоматическое размещение лимитных ордеров на покупку ниже текущей цены
- **Управление рисками** - контроль максимальной просадки и автоматическая остановка при превышении лимитов
- **Масштабирование позиций** - увеличение размера каждой следующей покупки согласно `sizeFactor`
- **Циклическая работа** - автоматический переход к новому раунду после закрытия позиции

## Принцип работы стратегии

### 1. Инициализация

При запуске робот:
1. Создает корзину для каждой торговой пары из списка `symbols`
2. Устанавливает плечо 30x для всех позиций
3. Настраивает интервал обновления данных (60 секунд)

### 2. Новый раунд торговли

```typescript
async newRound() {
  this.basketId++;
  this._prevOrderPrice = 0;
  
  // Покупаем базовую позицию по рыночной цене
  await this.buyMarket(this.getContractsAmount(this.sizeUsd));
  
  // Создаем первый лимитный ордер на усреднение
  await this.createLimitByStep();
}
```

### 3. Создание сетки ордеров

После каждой покупки робот создает следующий лимитный ордер:

```typescript
async createLimitByStep() {
  // Цена следующего ордера на gridStepPercent% ниже текущей
  let triggerPrice = this.price() * (1 - this.gridStepPercent / 100);
  
  // Размер позиции увеличивается согласно sizeFactor
  let amount = position.contracts * this.sizeFactor || this.getContractsAmount(this.sizeUsd);
  
  // Размещаем лимитный ордер на покупку
  let order = await this.buyLimit(amount, triggerPrice);
}
```

### 4. Управление рисками

Робот контролирует максимальную просадку и автоматически останавливается при превышении лимита:

```typescript
async checkRoundToClose() {
  const drawdown = longProfit(
    this.buyPosition.entryPrice,
    this.close(),
    this.buyPosition.contracts,
    this.contractSize,
  );

  // Остановка при превышении максимальной просадки
  if (this.sizeUsd * this.maxDrawdownPercent < -drawdown) {
    await this.stopBasket();
  }
  
  // Закрытие позиции при достижении тейк-профита
  if (percentDifference(this.buyPosition.entryPrice, this.bid()) > this.tpPercent) {
    await this.closeRound();
  }
}
```

## Преимущества JT Grid Bot

### Многопараллельная торговля
- Одновременная работа с 10+ торговыми парами
- Автоматический отбор активов по объему и ликвидности
- Независимое управление рисками для каждой пары

### Адаптивное масштабирование
- Увеличение размера позиций при падении цены
- Настраиваемый коэффициент масштабирования (`sizeFactor`)
- Автоматическое перебалансирование портфеля

### Продвинутый контроль рисков
- Ограничение максимальной просадки на корзину
- Автоматическая остановка при критических убытках
- Защита от маржин-коллов через контроль плеча

### Полная автоматизация
- Не требует вмешательства трейдера
- Автоматическое создание новых раундов
- Встроенная система мониторинга и отчетности

